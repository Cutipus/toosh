<div id="self" class="grid h-full grid-cols-4 gap-4 overflow-auto p-4">
  {% for col in columns %}
    <div class="space-y-4">
      {% for projectname, size in col %}
        <div>
          <a href="{{ url_for('item_focus', project_name=projectname) }}"
             hx-get="{{ url_for('project_fragment', project_name=projectname) }}"
             hx-target="#self"
             hx-swap="outerHTML"
             hx-push-url="{{ url_for('item_focus', project_name=projectname) }}">
            <div class="relative overflow-hidden rounded border border-gray-300">
              <!-- SVG Placeholder while loading -->
              <div id="loading-placeholder-{{ projectname }}"
                   class="inset-0 flex h-64 items-center justify-center">
                <svg class="h-12 w-12 animate-spin text-gray-400"
                     xmlns="http://www.w3.org/2000/svg"
                     fill="none"
                     viewBox="0 0 24 24">
                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                  <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
                </svg>
              </div>
              <img src="{{ url_for('static', filename='projects/' + projectname + '/preview.webp') }}"
                   width="300"
                   height="400"
                   alt="{{ projectname }}"
                   class="object-cover hidden transition-opacity duration-500"
                   hx-trigger="load"
                   hx-swap="outerHTML"
                   onload="this.style.display='block'; document.getElementById('loading-placeholder-{{ projectname }}').style.display='none';" />
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
  {% endfor %}
</div>
